# äº§å“è·¯çº¿å›¾

> AI Desktop Assistant æœªæ¥å‘å±•æ–¹å‘ä¸åŠŸèƒ½è§„åˆ’
> å‚è€ƒ: Claude Agent SDK / Claude Code

## äº§å“å®šä½

**AI Desktop Assistant** å®šä½ä¸ºä¸€æ¬¾ç±»ä¼¼ **Anthropic Claude Cowork** çš„æ¡Œé¢ AI åä½œå·¥å…·ï¼Œæä¾›ï¼š

- æµç•…çš„å¤šè½®å¯¹è¯ä½“éªŒ
- æœ¬åœ°æ–‡ä»¶ä¸é¡¹ç›®çš„æ·±åº¦é›†æˆ
- å·¥å…·è°ƒç”¨å’Œè‡ªåŠ¨åŒ–èƒ½åŠ›
- MCP åè®®æ”¯æŒï¼Œè¿æ¥å¤–éƒ¨æœåŠ¡
- å¤š AI æä¾›å•†æ”¯æŒ

## å½“å‰å·²å®ç° vs Claude Agent SDK

| åŠŸèƒ½ | å½“å‰çŠ¶æ€ | Claude Agent SDK |
|------|----------|------------------|
| å¤šè½®å¯¹è¯ | âœ… å·²å®ç° | âœ… |
| æµå¼å“åº” | âœ… å·²å®ç° | âœ… |
| ä¼šè¯æŒä¹…åŒ– | âœ… SQLite | âœ… |
| é…ç½®æŒä¹…åŒ– | âœ… SQLite | âœ… |
| å¤š API æä¾›å•† | âœ… å·²å®ç° | âœ… |
| æ–‡ä»¶è¯»å–å·¥å…· | âŒ | âœ… |
| æ–‡ä»¶å†™å…¥å·¥å…· | âŒ | âœ… |
| æ–‡ä»¶ç¼–è¾‘å·¥å…· | âŒ | âœ… |
| Bash æ‰§è¡Œå·¥å…· | âŒ | âœ… |
| Glob/Grep æœç´¢ | âŒ | âœ… |
| Git é›†æˆ | âŒ | âœ… |
| MCP åè®® | âŒ | âœ… |
| Hooks ç³»ç»Ÿ | âŒ | âœ… |
| å­ä»£ç† (Subagents) | âŒ | âœ… (æœ€å¤š 7 ä¸ªå¹¶è¡Œ) |
| æ£€æŸ¥ç‚¹/æ¢å¤ | âŒ | âœ… |
| ä¸Šä¸‹æ–‡å‹ç¼© | âŒ | âœ… |
| @ æ–‡ä»¶å¼•ç”¨ | âŒ | âœ… |
| æ–œæ å‘½ä»¤ | âŒ | âœ… |
| IDE é›†æˆ | âŒ | âœ… VS Code |

---

## åŠŸèƒ½æ¨¡å—è¯¦ç»†è§„åˆ’

### é˜¶æ®µä¸€: å·¥å…·ç³»ç»Ÿ (v1.4)

#### 1.1 å†…ç½®å·¥å…·

| å·¥å…· | åŠŸèƒ½ | æƒé™ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| `Read` | è¯»å–æ–‡ä»¶å†…å®¹ï¼Œæ”¯æŒè¡Œå·ã€å›¾ç‰‡ã€PDF | allow | P0 |
| `Write` | åˆ›å»ºæˆ–è¦†ç›–æ•´ä¸ªæ–‡ä»¶ | ask | P0 |
| `Edit` | ç²¾ç¡®å­—ç¬¦ä¸²æ›¿æ¢ç¼–è¾‘ | ask | P0 |
| `Glob` | æŒ‰æ¨¡å¼æœç´¢æ–‡ä»¶ (å¦‚ `**/*.ts`) | allow | P0 |
| `Grep` | æ­£åˆ™è¡¨è¾¾å¼æœç´¢æ–‡ä»¶å†…å®¹ | allow | P0 |
| `Bash` | æ‰§è¡Œ Shell å‘½ä»¤ | ask | P0 |
| `WebFetch` | è·å–ç½‘é¡µå†…å®¹ | allow | P1 |
| `WebSearch` | ç½‘ç»œæœç´¢ | allow | P2 |

#### 1.2 å·¥å…·å®ç°æ¶æ„

```typescript
interface Tool {
  name: string;
  description: string;
  input_schema: JSONSchema;
  execute: (input: unknown) => Promise<ToolResult>;
}

interface ToolResult {
  success: boolean;
  output?: string;
  error?: string;
}
```

#### 1.3 æƒé™ç³»ç»Ÿ

```json
{
  "permissions": {
    "read": "allow",
    "write": "ask",
    "edit": "ask",
    "bash": "ask",
    "webfetch": "allow"
  },
  "allowedPaths": ["./src", "./docs"],
  "deniedPaths": ["./node_modules", "./.env"]
}
```

æƒé™çº§åˆ«ï¼š
- `allow` - è‡ªåŠ¨å…è®¸ï¼Œæ— éœ€ç¡®è®¤
- `ask` - æ¯æ¬¡è¯¢é—®ç”¨æˆ·ç¡®è®¤
- `deny` - ç¦æ­¢ä½¿ç”¨

#### 1.4 å·¥å…·å¾ªç¯ (Agentic Loop)

```
ç”¨æˆ·è¾“å…¥
    â†“
AI åˆ†æå¹¶é€‰æ‹©å·¥å…·
    â†“
æ‰§è¡Œå·¥å…· â†’ è¿”å›ç»“æœ
    â†“
AI ç»§ç»­åˆ†æï¼ˆå¯èƒ½å†æ¬¡è°ƒç”¨å·¥å…·ï¼‰
    â†“
æœ€ç»ˆå“åº”
```

---

### é˜¶æ®µäºŒ: æ£€æŸ¥ç‚¹ä¸æ¢å¤ (v1.4.5)

#### 2.1 æ£€æŸ¥ç‚¹ç³»ç»Ÿ

Claude Code çš„æ£€æŸ¥ç‚¹åŠŸèƒ½å¯ä»¥è¿½è¸ªæ‰€æœ‰æ–‡ä»¶ä¿®æ”¹ï¼Œå…è®¸ç”¨æˆ·éšæ—¶å›æ»šã€‚

```typescript
interface Checkpoint {
  id: string;
  timestamp: number;
  description: string;
  changes: FileChange[];
}

interface FileChange {
  path: string;
  type: 'create' | 'modify' | 'delete';
  before?: string;
  after?: string;
}
```

#### 2.2 æ¢å¤åŠŸèƒ½

- `/rewind` - æ‰“å¼€æ¢å¤èœå•
- `Esc + Esc` - å¿«æ·é”®æ‰“å¼€æ¢å¤èœå•
- å¯é€‰æ‹©æ¢å¤ä»£ç ã€å¯¹è¯æˆ–ä¸¤è€…

**æ³¨æ„**: Bash å‘½ä»¤æ‰§è¡Œçš„ä¿®æ”¹ä¸ä¼šè¢«è¿½è¸ªï¼Œåªæœ‰é€šè¿‡å·¥å…·çš„æ–‡ä»¶ç¼–è¾‘ä¼šè¢«è®°å½•ã€‚

---

### é˜¶æ®µä¸‰: @ æ–‡ä»¶å¼•ç”¨ (v1.5)

#### 3.1 åŸºç¡€å¼•ç”¨

```
> åˆ†æ @src/auth.ts å¹¶å»ºè®®æ”¹è¿›

> æ¯”è¾ƒ @package.json å’Œ @package-lock.json

> è§£é‡Š @src/components/ ç›®å½•çš„æ¶æ„
```

#### 3.2 è¡ŒèŒƒå›´å¼•ç”¨

```
> ä¿®å¤ @src/utils.ts:42-58 ä¸­çš„ bug
```

#### 3.3 è‡ªåŠ¨è¡¥å…¨

æŒ‰ `Tab` é”®è‡ªåŠ¨è¡¥å…¨æ–‡ä»¶è·¯å¾„å’Œå‘½ä»¤ã€‚

---

### é˜¶æ®µå››: æ–œæ å‘½ä»¤ (v1.5)

#### 4.1 å†…ç½®å‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ | çŠ¶æ€ |
|------|------|------|
| `/help` | æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å‘½ä»¤ | ğŸ“‹ è®¡åˆ’ |
| `/init` | æ‰«æé¡¹ç›®å¹¶åˆ›å»º CLAUDE.md | ğŸ“‹ è®¡åˆ’ |
| `/clear` | æ¸…é™¤å¯¹è¯å†å² | ğŸ“‹ è®¡åˆ’ |
| `/compact` | å‹ç¼©å¯¹è¯ä»¥èŠ‚çœä¸Šä¸‹æ–‡ | ğŸ“‹ è®¡åˆ’ |
| `/memory` | ç¼–è¾‘é¡¹ç›®è®°å¿†æ–‡ä»¶ | ğŸ“‹ è®¡åˆ’ |
| `/config` | æ‰“å¼€é…ç½®ç•Œé¢ | ğŸ“‹ è®¡åˆ’ |
| `/model` | åˆ‡æ¢æ¨¡å‹ | ğŸ“‹ è®¡åˆ’ |
| `/cost` | æŸ¥çœ‹å½“å‰ token ç”¨é‡ | ğŸ“‹ è®¡åˆ’ |
| `/mcp` | ç®¡ç† MCP æœåŠ¡å™¨ | ğŸ“‹ è®¡åˆ’ |
| `/rewind` | å›æ»šåˆ°ä¹‹å‰çš„æ£€æŸ¥ç‚¹ | ğŸ“‹ è®¡åˆ’ |
| `/export` | å¯¼å‡ºå¯¹è¯åˆ°æ–‡ä»¶ | ğŸ“‹ è®¡åˆ’ |

#### 4.2 å¿«æ·é”®

| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| `Escape` | åœæ­¢å½“å‰å“åº” |
| `Escape + Escape` | æ‰“å¼€æ¢å¤èœå• |
| `â†‘` (ä¸Šç®­å¤´) | æµè§ˆå†å²æ¶ˆæ¯ |
| `Ctrl + V` | ç²˜è´´å›¾ç‰‡ |
| `Tab` | è‡ªåŠ¨è¡¥å…¨ |

---

### é˜¶æ®µäº”: Git é›†æˆ (v1.6)

#### 5.1 Git æ“ä½œæ”¯æŒ

| æ“ä½œ | åŠŸèƒ½ |
|------|------|
| çŠ¶æ€æŸ¥çœ‹ | `git status`, `git diff` |
| æäº¤ | ç”Ÿæˆæäº¤æ¶ˆæ¯å¹¶æäº¤ |
| åˆ†æ”¯ | åˆ›å»ºã€åˆ‡æ¢ã€åˆå¹¶åˆ†æ”¯ |
| Pull Request | åˆ›å»º PR å¹¶ç”Ÿæˆæè¿° |
| ä»£ç å®¡æŸ¥ | åˆ†æå˜æ›´å¹¶æä¾›å»ºè®® |

#### 5.2 æ™ºèƒ½æäº¤

AI è‡ªåŠ¨åˆ†æå˜æ›´å¹¶ç”Ÿæˆæœ‰æ„ä¹‰çš„æäº¤æ¶ˆæ¯ï¼š

```
> æäº¤å½“å‰æ›´æ”¹

AI: åˆ†æå˜æ›´...
å»ºè®®æäº¤æ¶ˆæ¯: "feat(auth): add OAuth2 login support"
ç¡®è®¤æäº¤ï¼Ÿ[Y/n]
```

---

### é˜¶æ®µå…­: Hooks ç³»ç»Ÿ (v1.7)

#### 6.1 ç”Ÿå‘½å‘¨æœŸäº‹ä»¶

Hooks å…è®¸åœ¨ AI æ“ä½œçš„å„ä¸ªé˜¶æ®µæ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘ï¼š

| äº‹ä»¶ | è§¦å‘æ—¶æœº |
|------|----------|
| `SessionStart` | ä¼šè¯å¼€å§‹ |
| `UserPromptSubmit` | ç”¨æˆ·æäº¤æ¶ˆæ¯å |
| `PreToolUse` | å·¥å…·æ‰§è¡Œå‰ |
| `PostToolUse` | å·¥å…·æ‰§è¡Œå |
| `PreFileEdit` | æ–‡ä»¶ç¼–è¾‘å‰ |
| `PostFileEdit` | æ–‡ä»¶ç¼–è¾‘å |
| `PreBashExecute` | Bash å‘½ä»¤æ‰§è¡Œå‰ |
| `PostBashExecute` | Bash å‘½ä»¤æ‰§è¡Œå |

#### 6.2 Hook é…ç½®

```json
{
  "hooks": {
    "PostFileEdit": {
      "command": "npx prettier --write $FILE",
      "description": "è‡ªåŠ¨æ ¼å¼åŒ–ç¼–è¾‘åçš„æ–‡ä»¶"
    },
    "PreBashExecute": {
      "command": "echo $COMMAND | grep -v 'rm -rf'",
      "description": "é˜»æ­¢å±é™©å‘½ä»¤"
    }
  }
}
```

#### 6.3 ç”¨ä¾‹

- **è‡ªåŠ¨æ ¼å¼åŒ–**: æ–‡ä»¶ç¼–è¾‘åè‡ªåŠ¨è¿è¡Œ Prettier/ESLint
- **å‘½ä»¤å®‰å…¨**: é˜»æ­¢å±é™©çš„ Bash å‘½ä»¤æ‰§è¡Œ
- **æ—¥å¿—è®°å½•**: è®°å½•æ‰€æœ‰å·¥å…·è°ƒç”¨
- **é€šçŸ¥**: é•¿æ—¶é—´ä»»åŠ¡å®Œæˆåå‘é€é€šçŸ¥

---

### é˜¶æ®µä¸ƒ: MCP åè®®æ”¯æŒ (v1.8)

#### 7.1 MCP æ¦‚è¿°

Model Context Protocol (MCP) æ˜¯ Anthropic æå‡ºçš„å¼€æ”¾åè®®ï¼Œå…è®¸ AI åº”ç”¨è¿æ¥å¤–éƒ¨å·¥å…·å’Œæ•°æ®æºã€‚

#### 7.2 ä¼ è¾“ç±»å‹

| ç±»å‹ | ç”¨é€” | ç¤ºä¾‹ |
|------|------|------|
| HTTP | è¿œç¨‹æœåŠ¡å™¨ï¼ˆæ¨èï¼‰ | Notion, GitHub, Sentry |
| Stdio | æœ¬åœ°è¿›ç¨‹ | PostgreSQL, æ–‡ä»¶ç³»ç»Ÿ |

#### 7.3 å¸¸ç”¨ MCP æœåŠ¡å™¨

| æœåŠ¡å™¨ | åŠŸèƒ½ | å®‰è£…å‘½ä»¤ |
|--------|------|----------|
| filesystem | æ–‡ä»¶ç³»ç»Ÿè®¿é—® | `npx @anthropic/mcp-server-filesystem` |
| github | GitHub é›†æˆ | `npx @anthropic/mcp-server-github` |
| postgres | æ•°æ®åº“æŸ¥è¯¢ | `npx @anthropic/mcp-server-postgres` |
| slack | Slack æ¶ˆæ¯ | `npx @anthropic/mcp-server-slack` |
| notion | Notion æ–‡æ¡£ | HTTP: `https://mcp.notion.com/mcp` |
| brave-search | ç½‘ç»œæœç´¢ | `npx @modelcontextprotocol/server-brave-search` |

#### 7.4 é…ç½®ç¤ºä¾‹

```json
{
  "mcpServers": {
    "filesystem": {
      "command": "npx",
      "args": ["-y", "@anthropic/mcp-server-filesystem", "./"]
    },
    "github": {
      "transport": "http",
      "url": "https://mcp.github.com",
      "oauth": {
        "clientId": "xxx",
        "scope": "repo"
      }
    }
  }
}
```

---

### é˜¶æ®µå…«: Agent ç³»ç»Ÿ (v1.9)

#### 8.1 ä¸»ä»£ç†æ¨¡å¼

| æ¨¡å¼ | æƒé™ | ç”¨é€” |
|------|------|------|
| Build | å®Œæ•´æƒé™ | å¼€å‘ã€ä¿®æ”¹æ–‡ä»¶ã€æ‰§è¡Œå‘½ä»¤ |
| Plan | åªè¯» | è§„åˆ’ã€åˆ†æã€ä»£ç å®¡æŸ¥ |

æŒ‰ `Tab` é”®åˆ‡æ¢ä¸»ä»£ç†æ¨¡å¼ã€‚

#### 8.2 å­ä»£ç† (Subagents)

Claude Code æ”¯æŒæœ€å¤š **7 ä¸ªå¹¶è¡Œå­ä»£ç†**ï¼š

| ä»£ç† | åŠŸèƒ½ | æƒé™ |
|------|------|------|
| General | é€šç”¨ç ”ç©¶ï¼Œå¤æ‚é—®é¢˜åˆ†è§£ | å®Œæ•´ |
| Explore | å¿«é€Ÿä»£ç æ¢ç´¢ | åªè¯» |
| Custom | ç”¨æˆ·è‡ªå®šä¹‰ä»£ç† | å¯é…ç½® |

ä½¿ç”¨ `@agent-name` è°ƒç”¨å­ä»£ç†ï¼š

```
> @explore æ‰¾å‡ºæ‰€æœ‰ä½¿ç”¨ useState çš„ç»„ä»¶
```

#### 8.3 è‡ªå®šä¹‰ Agent

```markdown
---
name: code-reviewer
description: ä»£ç å®¡æŸ¥ä¸“å®¶
mode: subagent
model: claude-sonnet-4-5
tools:
  write: false
  edit: false
  bash: false
---

ä½ æ˜¯ä¸€ä¸ªä»£ç å®¡æŸ¥ä¸“å®¶ï¼Œä¸“æ³¨äºï¼š
- ä»£ç è´¨é‡å’Œæœ€ä½³å®è·µ
- æ½œåœ¨çš„ bug å’Œè¾¹ç•Œæƒ…å†µ
- æ€§èƒ½å’Œå®‰å…¨é—®é¢˜
```

---

### é˜¶æ®µä¹: ä¸Šä¸‹æ–‡ç®¡ç† (v2.0)

#### 9.1 ä¸Šä¸‹æ–‡å‹ç¼© (/compact)

å½“å¯¹è¯è¿‡é•¿æ—¶ï¼Œè‡ªåŠ¨å‹ç¼©ä¿ç•™å…³é”®ä¿¡æ¯ï¼š

```
> /compact

AI: å‹ç¼©å¯¹è¯å†å²...
- åŸå§‹: 150,000 tokens
- å‹ç¼©å: 45,000 tokens
- ä¿ç•™äº†å…³é”®å†³ç­–å’Œä»£ç å˜æ›´è®°å½•
```

#### 9.2 é¡¹ç›®è®°å¿† (CLAUDE.md)

```markdown
# Project: AI Desktop Assistant

## Tech Stack
- Electron 28
- TypeScript 5.3
- SQLite (better-sqlite3)

## Coding Conventions
- ä½¿ç”¨è‹±æ–‡æ³¨é‡Š
- éµå¾ª ESLint è§„åˆ™

## Important Files
- src/claude-service.ts - AI æœåŠ¡æ ¸å¿ƒ
- src/session-storage.ts - ä¼šè¯å­˜å‚¨
```

#### 9.3 200K ä¸Šä¸‹æ–‡çª—å£

Claude æ”¯æŒ 200K token çš„ä¸Šä¸‹æ–‡çª—å£ï¼Œå¯ä»¥ç†è§£æ•´ä¸ªä»£ç åº“ç»“æ„ã€‚

---

### é˜¶æ®µå: IDE é›†æˆ (v2.1)

#### 10.1 VS Code æ‰©å±•

- ä¾§è¾¹æ èŠå¤©ç•Œé¢
- @ å¼•ç”¨æ‰“å¼€çš„æ–‡ä»¶
- é€‰ä¸­ä»£ç ç›´æ¥è¯¢é—®
- å†…è”ä»£ç å»ºè®®

#### 10.2 GitHub é›†æˆ

- `@claude` åœ¨ PR ä¸­è§¦å‘å®¡æŸ¥
- è‡ªåŠ¨ç”Ÿæˆ PR æè¿°
- Issue åˆ†æå’Œå»ºè®®

---

## å®ç°ä¼˜å…ˆçº§æ€»ç»“

| ç‰ˆæœ¬ | åŠŸèƒ½ | ä¼˜å…ˆçº§ |
|------|------|--------|
| v1.4 | å·¥å…·ç³»ç»Ÿ (Read/Write/Edit/Bash) | P0 |
| v1.4.5 | æ£€æŸ¥ç‚¹ä¸æ¢å¤ | P0 |
| v1.5 | @ æ–‡ä»¶å¼•ç”¨ + æ–œæ å‘½ä»¤ | P0 |
| v1.6 | Git é›†æˆ | P1 |
| v1.7 | Hooks ç³»ç»Ÿ | P1 |
| v1.8 | MCP åè®®æ”¯æŒ | P1 |
| v1.9 | Agent ç³»ç»Ÿ | P2 |
| v2.0 | ä¸Šä¸‹æ–‡ç®¡ç† | P2 |
| v2.1 | IDE é›†æˆ | P3 |

---

## æŠ€æœ¯å‚è€ƒ

- [Claude Agent SDK](https://github.com/anthropics/claude-agent-sdk-typescript)
- [Claude Code](https://github.com/anthropics/claude-code)
- [MCP è§„èŒƒ](https://modelcontextprotocol.io)
- [Anthropic API](https://docs.anthropic.com)

---

*æœ€åæ›´æ–°: 2026-02-20*
